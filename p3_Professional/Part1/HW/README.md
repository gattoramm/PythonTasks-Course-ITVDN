## Асинхронное и многопоточное программирование

### Вопросы

* Что такое потоки и как они связаны с процессами?
* Какое минимальное количество потоков содержит любая программа?
* В чем преимущество многопоточных программ?
* Что такое GIL и в чем особенности данного механизма?
* Какой класс из модуля threading необходимо использовать для создания потока, от которого можно наследоваться или же просто передать функцию для исполнения?
* Какие примитивы синхронизации процессов и потоков вы знаете?
* Какой класс используется для создание пула потоков из модуля concurrent.futures?
* Какой класс используется для создание пула процессов из модуля concurrent.futures?
* Как добавить задачу на исполнение в пулл Executor-а?
* Что такое Future?
* Что такое асинхронность?
* Кто переключает управление между задачами в многопоточном программировании?
* Кто переключает управление между задачами в сопрограммах?
* Как влияет GIL на работу асинхронных программ?
* Что такое сопрограмма и что связывает ее с генераторами?
* Что такое цикл событий, для чего он нужен?
* Зачем нужно ключевое слово async?
* Зачем нужно ключевое слово await?
* Начиная с какой версии языка Python он стал поддерживать в синтаксисе слова async и await?
* Какую сопрограмму можно использовать, чтобы уснуть на N секунд и переключиться на другую задачи?
* Для чего нужна библиотека aiohttp?

### Задания

**Задание 1**

Создайте сокет-сервер, который будет ожидать подключения по tcp-протоколу и запускать сокет-клиентов, которые подключаются на TCP сокет. Используйте примеры для создания TCP сокетов из предыдущих примеров. В качестве примера сервера можно использовать вычисление произведения двух чисел, где клиент отправляет два числа на tcp-сокет, а сервер отвечает результатом сложения и ожидает от клиента новую пару чисел. В случае если сокет послал сообщение с текстом close, то закрывать соединение с обеих сторон и завершать выполнение потока обработки клиента.

**Задание 2**

Создайте сопрограмму, которая получает контент с указанных ссылок и логирует ход выполнения в специальный файл используя стандартную библиотеку urllib, а затем проделайте то же самое с библиотекой aiohttp. Шаги, которые должны быть залогированы: начало запроса к адресу X, ответ для адреса X получен со статусом 200. Проверьте ход выполнения программы на >3 ресурсах и посмотрите последовательность записи логов в обоих вариантах и сравните результаты. Для двух видов задач используйте разные файла для логирования, чтобы сравнить полученный результат.

**Задание 3**

Создайте функцию по вычислению факториала числа. Запустите несколько задач, используя ThreadPoolExecutor и замерьте скорость их выполнения, а затем замерьте скорость вычисления, используя тот же самый набор задач на ProcessPoolExecutor. В качестве примеров, используйте крайние значения, начиная от минимальных и заканчивая максимально возможными, чтобы увидеть прирост или потерю производительности.

**Задание 4**

Создайте три функции, одна из которых читает файл на диске с заданным именем и проверяет наличие строку “Wow! ”. В случае, если файла нет, то засыпает на 5 секунд, а затем снова продолжает поиск по файлу. В случае, если файл есть, то открывает его и ищет строку “Wow!”. При наличии данной строки закрывает файл и генерирует событие, а другая функция ожидает данное событие и в случае его возникновения выполняет удаление этого файла. В случае если строки «Wow!» не было найдено в файле, то засыпать на 5 секунд. Создайте файл руками и проверьте выполнение программы.

**Задание 5**

Разработайте сокет сервер на основе библиотеки asyncio. Сокет сервер должен выполнять сложение двух чисел, как из предыдущего примера по многопоточности.